{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst FORM_STATE_KEY = 'feedback-form-state';\nconst form = document.querySelector('.feedback-form');\nconst storedFormState = localStorage.getItem(FORM_STATE_KEY);\n\nfunction getFormData(form) {\n  const formData = new FormData(form);\n  const formDataObject = {};\n\n  for (let [key, value] of formData.entries()) {\n    formDataObject[key] = value;\n  }\n\n  return formDataObject;\n}\n\nfunction handleInput() {\n  const formDataObject = getFormData(form);\n\n  localStorage.setItem(FORM_STATE_KEY, JSON.stringify(formDataObject));\n}\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  const formDataObject = getFormData(form);\n\n  if (Object.values(formDataObject).some((value) => !(!!value))) {\n    alert('Please, fill in all the fields.');\n    return;\n  }\n\n  form.reset();\n  localStorage.removeItem(FORM_STATE_KEY);\n\n  console.log(formDataObject);\n}\n\nform.addEventListener('input', throttle(handleInput, 500));\nform.addEventListener('submit', handleSubmit);\n\nif (storedFormState) {\n  const formStateObject = JSON.parse(storedFormState);\n\n  for (let [key, value] of Object.entries(formStateObject)) {\n    form.elements[key].value = value;\n  }\n}\n"],"names":["FORM_STATE_KEY","form","storedFormState","getFormData","formData","formDataObject","key","value","handleInput","handleSubmit","event","throttle","formStateObject"],"mappings":"wIAEA,MAAMA,EAAiB,sBACjBC,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAkB,aAAa,QAAQF,CAAc,EAE3D,SAASG,EAAYF,EAAM,CACzB,MAAMG,EAAW,IAAI,SAASH,CAAI,EAC5BI,EAAiB,CAAA,EAEvB,OAAS,CAACC,EAAKC,CAAK,IAAKH,EAAS,QAAO,EACvCC,EAAeC,GAAOC,EAGxB,OAAOF,CACT,CAEA,SAASG,GAAc,CACrB,MAAMH,EAAiBF,EAAYF,CAAI,EAEvC,aAAa,QAAQD,EAAgB,KAAK,UAAUK,CAAc,CAAC,CACrE,CAEA,SAASI,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EAEpB,MAAML,EAAiBF,EAAYF,CAAI,EAEvC,GAAI,OAAO,OAAOI,CAAc,EAAE,KAAME,GAAU,CAAIA,CAAM,EAAG,CAC7D,MAAM,iCAAiC,EACvC,MACD,CAEDN,EAAK,MAAK,EACV,aAAa,WAAWD,CAAc,EAEtC,QAAQ,IAAIK,CAAc,CAC5B,CAEAJ,EAAK,iBAAiB,QAASU,EAASH,EAAa,GAAG,CAAC,EACzDP,EAAK,iBAAiB,SAAUQ,CAAY,EAE5C,GAAIP,EAAiB,CACnB,MAAMU,EAAkB,KAAK,MAAMV,CAAe,EAElD,OAAS,CAACI,EAAKC,CAAK,IAAK,OAAO,QAAQK,CAAe,EACrDX,EAAK,SAASK,GAAK,MAAQC,CAE/B"}